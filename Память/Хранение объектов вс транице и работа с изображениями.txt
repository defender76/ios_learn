Память

Память хранится страницами 16k размер

может быть чистая и грязная. 
 Размер используемой памяти приложения это количество страниц * на размер страницы 

https://developer.apple.com/videos/play/wwdc2018/416/

20 000 интов занимает 6 страниц 

framework занимает место на странице data const

dirty память используемая приложением и все создания на куче и frameworks

в фреймворках синглтоны и глобальные инициализаторы помогают превратить память в чистую


no disk swap есть compressed

если 6 страниц и 5 занято могу сжать 3 в 1 и высвобожу 3 те сжатые будут compressed 

не лучшая идея сбрасывать кеш когда есть memmorywarning. системе заново придется компрессить пейджи. nscache очищает память и еще thread safe

 compressed + dirty = footprint. каждое приложение имеет ограничение по footprint  зависит от девайса. 


картинки хранятся в зависимости от размеров, а не от размера  2048 на 1536 на 4 байта на пиксель = 10 мб

590кб загружаются в память и декодируются получается 10 мб и далее рендер  4 байта на пиксель это SRGB формат 8 бит на пиксель то есть 1 на каждый цвет и еще прозрачность итого 4  а может быть еще больше. wideFormat в 2 раза больше информации на пиксель. 8 вместо 4 супер точные цвета на экране и снимках камеры.  2 байта красный, 2 байта зеленый, 2 байта синий и 2 байта альфа.    шейдеры используют luminance and alpha 8 format.  2 байта на пиксель: 1 байт на пиксель и альфа  alpha 8 format. Эмодзи занимает 1 байт. 75% меньше чем SRGB ( ну понятно 4 против 1)
 если надо ресайзить картинку не использовать UIImageView, а можно использовать imageIO. Не придется выделять память на декомпрессию картинки 

сгружай картинки большого размера при выходе 